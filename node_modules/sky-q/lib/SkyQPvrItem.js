const request = require('request-promise-native')

class SkyQPvrItem {

    constructor(pvrItemData, {detailUrl}={}) {
        this._pvrItemData = pvrItemData
        this._detailUrl = detailUrl
    }

    get id() { return this._pvrItemData.pvrid }
    get channelNumber() { return this._pvrItemData.c }
    get channelName() { return this._pvrItemData.cn }
    get synopsis() { return this._pvrItemData.sy }
    get title() { return this._pvrItemData.t }
    get deleted() { return !!this._pvrItemData.del }
    get detailAvailable() { return !this.deleted }

    getDetail() {
        if (this.detailAvailable) {
            return request({
                url: this._detailUrl,
                json: true
            })
        } else {
            return Promise.reject(new Error("PVR_ITEM_DELETED"))
        }
    }

}

module.exports = SkyQPvrItem
